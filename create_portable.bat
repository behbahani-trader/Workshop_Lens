@echo off
chcp 65001 >nul
echo ==========================================
echo    ุณุงุฎุช ูุณุฎู ูุงุจู ุญูู
echo ==========================================
echo.

echo ๐ง ูุฑุญูู 1: ูุตุจ PyInstaller...
pip install pyinstaller

echo.
echo ๐งน ูุฑุญูู 2: ูพุงฺฉ ฺฉุฑุฏู ูุงูโูุง ูุจู...
if exist "dist" rmdir /s /q "dist"
if exist "build" rmdir /s /q "build"

echo.
echo ๐ฆ ูุฑุญูู 3: ุณุงุฎุช ูุงู ุงุฌุฑุง...
pyinstaller --onefile --add-data "app/templates;app/templates" --add-data "app/static;app/static" --add-data "instance;instance" --name "LensWorkshop" run.py

echo.
echo ๐ ูุฑุญูู 4: ุงุฌุงุฏ ูพูุดู ููุง...
mkdir "dist\LensWorkshop_Portable"
move "dist\LensWorkshop.exe" "dist\LensWorkshop_Portable\"

echo.
echo ๐ ูุฑุญูู 5: ุงุฌุงุฏ ูุงู ุฑุงูโุงูุฏุงุฒ...
(
echo @echo off
echo chcp 65001 ^>nul
echo echo ==========================================
echo echo    ูุฑูโุงูุฒุงุฑ ูุฏุฑุช ฺฉุงุฑฺฏุงู ุนูฺฉโุณุงุฒ
echo echo ==========================================
echo echo.
echo echo ๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ...
echo echo.
echo echo โ ูพุณ ุงุฒ ุฑุงูโุงูุฏุงุฒุ ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
echo echo ๐ http://localhost:5000
echo echo.
echo echo ๐ค ุงุทูุงุนุงุช ูุฑูุฏ:
echo echo    ูุงู ฺฉุงุฑุจุฑ: admin
echo echo    ุฑูุฒ ุนุจูุฑ: admin
echo echo.
echo echo โ๏ธ  ุจุฑุง ุฎุฑูุฌุ ุงู ูพูุฌุฑู ุฑุง ุจุจูุฏุฏ.
echo echo.
echo LensWorkshop.exe
echo pause
) > "dist\LensWorkshop_Portable\ุดุฑูุน.bat"

echo.
echo ๐ ูุฑุญูู 6: ุงุฌุงุฏ ูุงู ุฑุงูููุง...
(
echo ==========================================
echo    ูุฑูโุงูุฒุงุฑ ูุฏุฑุช ฺฉุงุฑฺฏุงู ุนูฺฉโุณุงุฒ
echo ==========================================
echo.
echo ๐ ูุญูู ุงุณุชูุงุฏู:
echo 1. ูุงู "ุดุฑูุน.bat" ุฑุง ุฏุงุจู ฺฉูฺฉ ฺฉูุฏ
echo 2. ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุจู ุขุฏุฑุณ http://localhost:5000 ุจุฑูุฏ
echo 3. ุจุง ุงุทูุงุนุงุช ุฒุฑ ูุงุฑุฏ ุดูุฏ:
echo    ๐ค ูุงู ฺฉุงุฑุจุฑ: admin
echo    ๐ ุฑูุฒ ุนุจูุฑ: admin
echo.
echo ๐ก ูฺฉุงุช ููู:
echo โ ุงู ูุฑูโุงูุฒุงุฑ ูุงุฒ ุจู ุงูุชุฑูุช ูุฏุงุฑุฏ
echo โ ุชูุงู ุงุทูุงุนุงุช ุฏุฑ ููู ูพูุดู ุฐุฎุฑู ูโุดูุฏ
echo โ ุจุฑุง ูพุดุชุจุงูโฺฏุฑ ุงุฒ ุจุฎุด ฺฏุฒุงุฑุดุงุช ุงุณุชูุงุฏู ฺฉูุฏ
echo โ ุจุฑุง ุงูุชูุงู ุจู ุณุณุชู ุฏฺฏุฑุ ฺฉู ูพูุดู ุฑุง ฺฉูพ ฺฉูุฏ
echo.
echo ๐ง ุนุจโุงุจ:
echo โ ุงฺฏุฑ ุฎุทุง "Port in use" ุฏุฏุฏุ ุจุฑูุงูู ุฑุง ุจุจูุฏุฏ ู ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ
echo โ ุงฺฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ูุดุฏุ ุฏุณุช ุขุฏุฑุณ http://localhost:5000 ุฑุง ูุงุฑุฏ ฺฉูุฏ
echo โ ุงฺฏุฑ ุตูุญู ููุฏ ูุดุฏุ ฺูุฏ ุซุงูู ุตุจุฑ ฺฉูุฏ ู ุตูุญู ุฑุง refresh ฺฉูุฏ
echo.
echo ๐ ูพุดุชุจุงู:
echo ุงู ูุฑูโุงูุฒุงุฑ ุจุฑุง ูุฏุฑุช ฺฉุงุฑฺฏุงูโูุง ุนูฺฉโุณุงุฒ ุทุฑุงุญ ุดุฏู ุงุณุช.
echo ุดุงูู: ูุฏุฑุช ุณูุงุฑุดุงุชุ ูุดุชุฑุงูุ ุงููุงุน ุนุฏุณ ู ุชุฑุงุดุ ฺฏุฒุงุฑุดุงุช ู ูพุดุชุจุงูโฺฏุฑ
) > "dist\LensWorkshop_Portable\ุฑุงูููุง.txt"

echo.
echo ๐ฏ ูุฑุญูู 7: ฺฉูพ ูุงูโูุง ุถุฑูุฑ...
if exist "instance\database.db" (
    copy "instance\database.db" "dist\LensWorkshop_Portable\"
)

echo.
echo ==========================================
echo โ ุณุงุฎุช ูุณุฎู ูุงุจู ุญูู ุชฺฉูู ุดุฏ!
echo ==========================================
echo.
echo ๐ ูุณุฑ ูุงูโูุง: dist\LensWorkshop_Portable
echo ๐ ุจุฑุง ุงุฌุฑุง: ุดุฑูุน.bat ุฑุง ุฏุงุจู ฺฉูฺฉ ฺฉูุฏ
echo ๐ฆ ุจุฑุง ุงูุชูุงู: ฺฉู ูพูุดู LensWorkshop_Portable ุฑุง ฺฉูพ ฺฉูุฏ
echo.
echo ๐ก ุงู ูพูุดู ุฑุง ูโุชูุงูุฏ ุฑู ูุฑ ุณุณุชู ููุฏูุฒ ุจุฏูู ูุงุฒ ุจู ูุตุจ ุงุฌุฑุง ฺฉูุฏ!
echo.
pause
